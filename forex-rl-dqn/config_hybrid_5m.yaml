# Configuração LightGBM para Trading Forex - TIMEFRAME 5 MINUTOS
# =================================================================
# Períodos de indicadores otimizados para timeframe de 5 minutos
# Em 5m, 1 dia = 288 candles, 1 semana = 2016 candles

# Configurações Gerais
general:
  seed: 42
  verbose: true
  log_dir: "logs/hybrid_5m"
  models_dir: "models/hybrid_5m"
  timeframe: "5m"
  
# Dados
data:
  train_file: "data/usdjpy_history_5m.csv"  # Arquivo de treino 5m
  val_split: 0.15  # 15% para validação
  test_split: 0.15  # 15% para teste
  
  # Colunas OBRIGATÓRIAS no CSV (OHLCV)
  timestamp_col: "timestamp"
  open_col: "open"
  high_col: "high"
  low_col: "low"
  close_col: "close"
  volume_col: "volume"
  
  # Janela de lookback para features
  # 5m: 96 candles = 8 horas de trading
  lookback_window: 96
  
# Features Técnicas - OTIMIZADO PARA 5 MINUTOS
features:
  # === INDICADORES PRINCIPAIS (sempre calculados do zero) ===
  
  # RSI - Timeframe muito curto requer período menor
  use_rsi: false
  rsi_period: 14  # 5m: 14 períodos = 70 minutos (~1.2h)
  
  # EMAs - Períodos ajustados para 5m
  use_ema: true
  ema_periods: [12, 26, 50]  # 12=1h, 26=2.2h, 50=4.2h
  ema_fast: 12   # Rápida: 1 hora
  ema_slow: 26  # Lenta: ~2 horas
  
  # MACD - Ajustado para 5m
  use_macd: true
  macd_fast: 12   # 1 hora
  macd_slow: 26  # ~2 horas
  macd_signal: 9 # 45 minutos
  
  # Bollinger Bands - Período ajustado para 5m
  use_bollinger: true
  bb_period: 20  # 100 minutos (~1.7h)
  bb_std: 2.0
  
  # ATR - Volatilidade de muito curto prazo
  use_atr: false
  atr_period: 14  # 70 minutos
  
  # Momentum - Períodos curtos
  use_momentum: false
  momentum_periods: [10, 20]  # 10=50min, 20=1.7h
  
  # SMAs - Períodos ajustados
  use_sma: false
  sma_periods: [20, 50]  # 20=1.7h, 50=4.2h
  
  # Stochastic - Mais sensível para 5m
  use_stochastic: false
  stoch_k: 14  # 70 minutos
  stoch_d: 3
  
  # ADX - Força de tendência
  use_adx: false
  adx_period: 14  # 70 minutos
  
  # Volatilidade - Janela muito curta
  use_volatility: false
  volatility_window: 20  # 100 minutos
  
  # CCI
  use_cci: false
  cci_period: 20  # 100 minutos
  
  # Williams %R
  use_williams: false
  williams_period: 14  # 70 minutos
  
  # ROC
  use_roc: false
  roc_period: 12  # 1 hora
  
  # OBV
  use_obv: false
  
  # MFI
  use_mfi: false
  mfi_period: 14  # 70 minutos
  
  # === FEATURES AGREGADAS ===
  use_returns: true
  return_periods: [1, 3, 6, 12]  # 5min, 15min, 30min, 1h
  
  use_volume_features: false
  
  # Price patterns
  use_price_patterns: false
  
  # Time features (hora do dia, dia da semana)
  use_time_features: true
  
# Configuração do LightGBM
lightgbm:
  # Target: previsão de retorno futuro
  prediction_horizon: 6  # Quantos candles à frente prever (6 = 30 minutos)
  
  # Tipo de modelo
  model_type: "regressor"  # 'classifier' ou 'regressor'
  objective: "regression"
  metric: "rmse"
  
  # Hiperparâmetros principais
  params:
    boosting_type: "gbdt"
    learning_rate: 0.03
    num_leaves: 50
    max_depth: 6
    n_estimators: 500
    min_child_samples: 20
    
    # Regularização
    subsample: 0.8
    subsample_freq: 1
    colsample_bytree: 0.8
    reg_alpha: 0.3  # L1
    reg_lambda: 0.3  # L2
    
    # Performance
    n_jobs: -1
    verbose: -1
    importance_type: "gain"
    
  # Early stopping
  early_stopping_rounds: 50
  
  # Feature importance
  save_importance: true
  min_importance_threshold: 0.001  # Remove features com importância < 0.1%

# Validação e Métricas
validation:
  # Cross-validation
  use_cv: false
  cv_folds: 5
  
  # Métricas customizadas
  custom_metrics:
    - "direction_accuracy"  # % de acerto na direção
    - "sharpe_ratio"  # Sharpe simulado
    - "max_drawdown"  # Drawdown máximo simulado
    
# Pós-processamento
postprocess:
  # Clip de previsões extremas (em desvios-padrão)
  clip_predictions: true
  clip_std_multiplier: 3.0
  
  # Suavização de previsões
  smooth_predictions: false
  smooth_window: 3
